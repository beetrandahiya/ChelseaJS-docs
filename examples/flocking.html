<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link
    rel="stylesheet"
    href="../assets/prism.css"
  />
    <link rel="stylesheet" href="styles.css">
    <title>Chelsea.js Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

</head>
<body>
    <div class="navbar">
        <div class="logo"> <a href="../home.html" target="_blank"><span style="font-weight: 800;">CHELSEA</span>JS</a></div>
        <a href="javascript:void(0);" class="navbar-burger" onclick="navbar_resp()">
            <i class="fa fa-bars"></i>
            </a>
        <div class="navstuff">
            <div>
                <a href="../index.html">Docs</a>
            </div>
            <div>
                <a href="../examples.html">Examples</a>
            </div>
            <div>
                <a href="../download.html">Download</a>
            </div>
            <div>
                <a href="https://www.github.com/beetrandahiya/ChelseaJS" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 1024 1024" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" transform="scale(64)" fill="#1B1F23"/>
                        </svg>                </a>
            </div>
            
        </div>
       
    </div>
    <div class="main">
        <div class="sidebar">
            <div class="sidebar-elem ">
                <a href="../index.html">Getting Started</a>
            </div>
            <button class="dropdown-btn">Shapes <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../shapes/point.html">Point</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/line.html">Line</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/rectangle.html">Rectangle</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/circle.html">Circle</a>
                </div>  
                <div class="sidebar-elem">
                    <a href="../shapes/ellipse.html">Ellipse</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/arc.html">Arc</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/polygon.html">Polygon</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/regpolygon.html">Regular Polygon</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/star.html">Star</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/cubbezier.html">Cubic Bezier Curve</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/twopointcubicbezier.html">Two Point Cubic Bezier Curve</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../shapes/twopointquadbezier.html">Two Point Cubic Bezier Curve</a>
                </div>
                

                

            </div>
            <button class="dropdown-btn">Enviroment <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../enviro/width.html">Width</a>
                    </div>  
                <div class="sidebar-elem">
                    <a href="../enviro/height.html">Height</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../enviro/framerate.html">frameRate</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../enviro/clearCanvas.html">clearCanvas</a>
                    </div>
                



            </div>
            <button class="dropdown-btn">Math <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../math/trignometry.html">Trigonometry</a>
                    </div>  
                <div class="sidebar-elem">
                    <a href="../math/algebra.html">Algebraic Functions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/conversions.html">Conversions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/interp.html">Interpolations</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/random.html">Random Functions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/scaling.html">Scaling Functions</a>
                    </div>
                <div class="sidebar-elem">
                    <a href="../math/constants.html">Constants</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../math/vector.html">Vector Functions</a>
                </div>
            </div>
            <button class="dropdown-btn">Color <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../color/rgb.html">RGB</a>
                </div>
<div class="sidebar-elem">
                    <a href="../color/hsl.html">HSL</a>
                </div>
<div class="sidebar-elem">
                    <a href="../color/hex.html">Hex</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../color/lerpColor.html">Lerp Color</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../color/colorConversions.html">Color Conversions</a>
                </div>
            </div>
            <button class="dropdown-btn">Events <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                <div class="sidebar-elem">
                    <a href="../events/mouse.html">Mouse</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../events/keyboard.html">Keyboard</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../events/touch.html">Touch</a>
                </div>
            </div>
            <button class="dropdown-btn">Time <i class="fas fa-angle-down"></i></button>
            <div class="dropdown-container">
                
                
                <div class="sidebar-elem">
                    <a href="../time/getTime.html">Time</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../time/date.html">Date</a>
                </div>
                <div class="sidebar-elem">
                    <a href="../time/day.html">Day</a>
                </div>
                
                <div class="sidebar-elem">
                    <a href="../time/timeTaken.html">Execution time</a>
                    </div>
            </div>
            


            

        </div>
        <div class="doc">

            <div class="example-container" style="width:40vw; height:50vw; margin:auto; background: #fff;">

    
        </div>
        <h1>
Flocking Simulation        </h1>
        <p>
            An implementation of Craig Reynold's Boids program to simulate the flocking behavior of birds. Each boid steers itself based on rules of avoidance, alignment, and coherence. 

        </p>

 

    </div>
    
    <script src="../main.js"></script>
    <script src="script.js"></script>
    <script>

     
elem = document.querySelector(".example-container");
setCanvas(elem);

w = WIDTH;
h = HEIGHT;

fetch_mouse_pos(elem, "mousemove");


//flocking

//boid
MAX_SPEED = 2.5;
MAX_FORCE = 0.1;
class Boid {
    constructor() {
        this.pos = createVector(random(0, w), random(0, h));
        this.vel = createVector(random(-MAX_SPEED, MAX_SPEED), random(-MAX_SPEED, MAX_SPEED));
        this.acc = createVector(0, 0);
        this.color = `hsla(${random(0,360)},100%,50%,1)`;
    }
    edges() {
        if (this.pos.x > w) {
            this.pos.x = 0;
        }
        if (this.pos.x < 0) {
            this.pos.x = w;
        }
        if (this.pos.y > h) {
            this.pos.y = 0;
        }
        if (this.pos.y < 0) {
            this.pos.y = h;
        }

    }

    /////////////////////////////////
    ///Alignment
    /////////////////////////////////
    align(boids) {
        let perception = 95;
        let steer = createVector(0, 0);
        let total = 0;
        for (let other of boids) {
            if (other != this) {
                //keep the average calculation in percetion range
                let d = distanceVec(this.pos, other.pos);
                if (d < perception) {
                    steer = addVec(steer, other.vel);
                    total++;
                }
            }

        }
        if (total > 0) {
            //steering
            steer = divideVec(steer, total);
            steer = setMagnitude(steer, MAX_SPEED);
            steer = subtractVec(steer, this.vel);
            steer = limitVec(steer, MAX_FORCE);

        }
        return steer;
    }

    /////////////////////////////////
    ///Cohesion
    /////////////////////////////////
    cohesion(boids) {
        let perception = 90;
        let steer = createVector(0, 0);
        let total = 0;
        for (let other of boids) {
            if (other != this) {
                //keep the average calculation in percetion range
                let d = distanceVec(this.pos, other.pos);
                if (d < perception) {
                    steer = addVec(steer, other.pos);
                    total++;
                }
            }
        }
        if (total > 0) {
            //steering
            steer = divideVec(steer, total);
            steer = subtractVec(steer, this.pos);
            steer = setMagnitude(steer, MAX_SPEED);
            steer = subtractVec(steer, this.vel);
            steer = limitVec(steer, MAX_FORCE);
        }
        return steer;
    }

    /////////////////////////////////
    ///Separation
    /////////////////////////////////
    separation(boids) {
        let perception = 54;
        let steer = createVector(0, 0);
        let total = 0;
        for (let other of boids) {
            if (other != this) {
                //keep the average calculation in percetion range
                let d = distanceVec(this.pos, other.pos);
                if (d < perception) {
                    let diff = subtractVec(this.pos, other.pos);
                    diff = divideVec(diff, d * d);
                    steer = addVec(steer, diff);
                    total++;
                }
            }
        }
        if (total > 0) {
            //steering
            steer = divideVec(steer, total);
            steer = setMagnitude(steer, MAX_SPEED);
            steer = subtractVec(steer, this.vel);
            steer = limitVec(steer, MAX_FORCE);
        }
        return steer;
    }


    flock(boids) {
        this.acc = addVec(this.acc, this.align(boids));
        this.acc = addVec(this.acc, this.cohesion(boids));
        this.acc = addVec(this.acc, this.separation(boids));
    }
    show() {
        new circle(this.pos.x, this.pos.y, 4, this.color, 1, "#fff", 0);
       }
    update() {
        this.pos = addVec(this.pos, this.vel);
        this.vel = addVec(this.vel, this.acc);
        this.vel = limitVec(this.vel, MAX_SPEED);
        this.acc = createVector(0, 0);
    }
}



//flock

flock = [];
for (i = 0; i < 100; i++) {
    flock.push(new Boid());
}

t = 1;

function draw() {

    clearCanvas();

    for (let boid of flock) {
        boid.edges();
        boid.flock(flock);
        boid.update();
        boid.show();
    }

    requestAnimationFrame(draw);


}

///////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

draw();
    </script>
    
    <script src="../assets/prism.js"></script>


</body>
</html>